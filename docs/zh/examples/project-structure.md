# 项目结构对比

本页面展示了使用 `ew-auto-import-tool` 前后项目结构的变化，帮助您了解工具对项目的影响。

## 配置前的项目结构

以下是一个典型的 Vue 3 + Vite 项目在使用自动导入工具之前的结构：

```
my-vue-app/
├── node_modules/
├── public/
├── src/
│   ├── assets/
│   ├── components/
│   ├── App.vue         # 需要手动导入组件
│   ├── main.ts
│   └── vite-env.d.ts
├── .gitignore
├── index.html
├── package.json       # 不包含组件库和自动导入插件
├── tsconfig.json      # 不包含类型声明文件引用
├── tsconfig.node.json
└── vite.config.ts     # 不包含自动导入插件配置
```

### package.json (配置前)

```json
{
  "name": "my-vue-app",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "vue": "^3.3.4"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.2.3",
    "typescript": "^5.0.2",
    "vite": "^4.4.5",
    "vue-tsc": "^1.8.5"
  }
}
```

### vite.config.ts (配置前)

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
  plugins: [vue()],
});
```

### tsconfig.json (配置前)

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,
    "types": ["vite/client"]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

## 配置后的项目结构

使用 `ew-auto-import-tool` 配置后，项目结构会有以下变化：

```
my-vue-app/
├── node_modules/      # 新增了组件库和自动导入插件
├── public/
├── src/
│   ├── assets/
│   ├── components/
│   ├── App.vue        # 无需手动导入组件
│   ├── main.ts
│   └── vite-env.d.ts
├── .gitignore
├── auto-imports.d.ts  # 新增：API 自动导入声明文件
├── components.d.ts    # 新增：组件自动导入声明文件
├── index.html
├── package.json       # 更新：添加了组件库和自动导入插件
├── tsconfig.json      # 更新：引用了声明文件
├── tsconfig.node.json
└── vite.config.ts     # 更新：添加了自动导入插件配置
```

### package.json (配置后)

```json
{
  "name": "my-vue-app",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "element-plus": "^2.3.14",
    "vue": "^3.3.4"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.2.3",
    "typescript": "^5.0.2",
    "unplugin-auto-import": "^0.16.6",
    "unplugin-vue-components": "^0.25.2",
    "vite": "^4.4.5",
    "vue-tsc": "^1.8.5"
  }
}
```

### vite.config.ts (配置后)

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import AutoImport from "unplugin-auto-import/vite";
import Components from "unplugin-vue-components/vite";
import { ElementPlusResolver } from "unplugin-vue-components/resolvers";

export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
});
```

### tsconfig.json (配置后)

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,
    "types": ["vite/client"]
  },
  "include": [
    "src/**/*.ts",
    "src/**/*.d.ts",
    "src/**/*.tsx",
    "src/**/*.vue",
    "components.d.ts",
    "auto-imports.d.ts"
  ]
}
```

### components.d.ts (新增)

```typescript
// generated by unplugin-vue-components
// We suggest you to commit this file into source control
// Read more: https://github.com/vuejs/core/pull/3399
import "@vue/runtime-core";

declare module "@vue/runtime-core" {
  export interface GlobalComponents {
    ElButton: typeof import("element-plus")["ElButton"];
    ElInput: typeof import("element-plus")["ElInput"];
    ElOption: typeof import("element-plus")["ElOption"];
    ElSelect: typeof import("element-plus")["ElSelect"];
    // ... 其他组件
  }
}

export {};
```

### auto-imports.d.ts (新增)

```typescript
// generated by unplugin-auto-import
// We suggest you to commit this file into source control
declare global {
  const ElLoading: typeof import("element-plus/es")["ElLoading"];
  const ElMessage: typeof import("element-plus/es")["ElMessage"];
  const ElMessageBox: typeof import("element-plus/es")["ElMessageBox"];
  const ElNotification: typeof import("element-plus/es")["ElNotification"];
  // ... 其他API
}

export {};
```

## 主要变化

使用 `ew-auto-import-tool` 后，项目有以下主要变化：

1. **新增依赖**：

   - 组件库（如 Element Plus）
   - unplugin-auto-import
   - unplugin-vue-components

2. **配置文件更新**：

   - vite.config.ts 添加了自动导入插件配置
   - tsconfig.json 添加了声明文件引用

3. **新增文件**：

   - components.d.ts - 组件类型声明文件
   - auto-imports.d.ts - API 类型声明文件

4. **代码简化**：
   - 无需手动导入组件和样式
   - 提供完整的类型支持和代码补全

这些变化使得开发更加高效，代码更加简洁，同时保持了完整的类型支持。
